<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MQTTSuite: mqttbroker/mqttbroker.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra-style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">MQTTSuite
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('mqttbroker_8cpp.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">mqttbroker.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="SharedSocketContextFactory_8h_source.html">SharedSocketContextFactory.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mqttbroker_2lib_2Mqtt_8h_source.html">lib/Mqtt.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="MqttModel_8h_source.html">lib/MqttModel.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="inja_8hpp_source.html">lib/inja.hpp</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for mqttbroker.cpp:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="mqttbroker_8cpp__incl.svg" width="2454" height="198"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<p><a href="mqttbroker_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:abcf60cb690f64fa70b8f3728e1de0759" id="r_abcf60cb690f64fa70b8f3728e1de0759"><td class="memItemLeft" align="right" valign="top">static void upgrade&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abcf60cb690f64fa70b8f3728e1de0759">APPLICATION</a> (req, res)</td></tr>
<tr class="separator:abcf60cb690f64fa70b8f3728e1de0759"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41a2989a69eb2abb480616f166598a89" id="r_a41a2989a69eb2abb480616f166598a89"><td class="memItemLeft" align="right" valign="top">static std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a41a2989a69eb2abb480616f166598a89">href</a> (const std::string &amp;text, const std::string &amp;link)</td></tr>
<tr class="separator:a41a2989a69eb2abb480616f166598a89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9dfd7c4353c3e607ddb8f6b0d920db36" id="r_a9dfd7c4353c3e607ddb8f6b0d920db36"><td class="memItemLeft" align="right" valign="top">static std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9dfd7c4353c3e607ddb8f6b0d920db36">href</a> (const std::string &amp;text, const std::string &amp;url, const std::string &amp;windowId, uint16_t width, uint16_t height)</td></tr>
<tr class="separator:a9dfd7c4353c3e607ddb8f6b0d920db36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8efa425515f60a2e93fb017517771a3e" id="r_a8efa425515f60a2e93fb017517771a3e"><td class="memItemLeft" align="right" valign="top">static std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8efa425515f60a2e93fb017517771a3e">getOverviewPage</a> (<a class="el" href="classinja_1_1Environment.html">inja::Environment</a> &amp;environment, <a class="el" href="classmqtt_1_1mqttbroker_1_1lib_1_1MqttModel.html">mqtt::mqttbroker::lib::MqttModel</a> &amp;mqttModel)</td></tr>
<tr class="separator:a8efa425515f60a2e93fb017517771a3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a113c358f84d4e5e7012f7726243b9d5e" id="r_a113c358f84d4e5e7012f7726243b9d5e"><td class="memItemLeft" align="right" valign="top">static std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a113c358f84d4e5e7012f7726243b9d5e">getDetailedPage</a> (<a class="el" href="classinja_1_1Environment.html">inja::Environment</a> &amp;environment, const <a class="el" href="classmqtt_1_1mqttbroker_1_1lib_1_1Mqtt.html">mqtt::mqttbroker::lib::Mqtt</a> *mqtt)</td></tr>
<tr class="separator:a113c358f84d4e5e7012f7726243b9d5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a060eea8fb783d5b54f6fa11cf4e32be9" id="r_a060eea8fb783d5b54f6fa11cf4e32be9"><td class="memItemLeft" align="right" valign="top">static std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a060eea8fb783d5b54f6fa11cf4e32be9">urlDecode</a> (const std::string &amp;encoded)</td></tr>
<tr class="separator:a060eea8fb783d5b54f6fa11cf4e32be9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50ddcb3430ae14c608a8cb6c86033669" id="r_a50ddcb3430ae14c608a8cb6c86033669"><td class="memItemLeft" align="right" valign="top">static express::Router&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a50ddcb3430ae14c608a8cb6c86033669">getRouter</a> (<a class="el" href="classinja_1_1Environment.html">inja::Environment</a> &amp;environment)</td></tr>
<tr class="separator:a50ddcb3430ae14c608a8cb6c86033669"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cb8447e3290d506bf8a79ddeca2c7d0" id="r_a7cb8447e3290d506bf8a79ddeca2c7d0"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7cb8447e3290d506bf8a79ddeca2c7d0">reportState</a> (const std::string &amp;instanceName, const core::socket::SocketAddress &amp;socketAddress, const core::socket::State &amp;state)</td></tr>
<tr class="separator:a7cb8447e3290d506bf8a79ddeca2c7d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56089521f567aa4fa0b6788a1edb489e" id="r_a56089521f567aa4fa0b6788a1edb489e"><td class="memTemplParams" colspan="2">template&lt;template&lt; typename, typename... &gt; typename SocketServer, typename SocketContextFactory , typename... SocketContextFactoryArgs, typename Server  = SocketServer&lt;SocketContextFactory, SocketContextFactoryArgs&amp;&amp;...&gt;, typename SocketAddress  = typename Server::SocketAddress, typename  = std::enable_if_t&lt;std::is_base_of_v&lt;core::socket::stream::SocketContextFactory, SocketContextFactory&gt;&gt;&gt; </td></tr>
<tr class="memitem:a56089521f567aa4fa0b6788a1edb489e"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#a56089521f567aa4fa0b6788a1edb489e">startServer</a> (const std::string &amp;instanceName, const std::function&lt; void(typename Server::Config &amp;)&gt; &amp;configurator, SocketContextFactoryArgs &amp;&amp;... socketContextFactoryArgs)</td></tr>
<tr class="separator:a56089521f567aa4fa0b6788a1edb489e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade35717ef12be889cc09968dce2a3103" id="r_ade35717ef12be889cc09968dce2a3103"><td class="memTemplParams" colspan="2">template&lt;template&lt; typename, typename... &gt; typename SocketServer, typename SocketContextFactory , typename... SocketContextFactoryArgs, typename Server  = SocketServer&lt;SocketContextFactory, SocketContextFactoryArgs&amp;&amp;...&gt;, typename SocketAddress  = typename Server::SocketAddress, typename  = std::enable_if_t&lt;not std::is_invocable_v&lt;std::tuple_element_t&lt;0, std::tuple&lt;SocketContextFactoryArgs...&gt;&gt;,                                                              typename SocketServer&lt;SocketContextFactory&gt;::Config&amp;&gt;&gt;&gt; </td></tr>
<tr class="memitem:ade35717ef12be889cc09968dce2a3103"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#ade35717ef12be889cc09968dce2a3103">startServer</a> (const std::string &amp;instanceName, SocketContextFactoryArgs &amp;&amp;... socketContextFactoryArgs)</td></tr>
<tr class="separator:ade35717ef12be889cc09968dce2a3103"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8510ee5f4f2bd0ebc5315a2e9361a258" id="r_a8510ee5f4f2bd0ebc5315a2e9361a258"><td class="memTemplParams" colspan="2">template&lt;typename HttpExpressServer &gt; </td></tr>
<tr class="memitem:a8510ee5f4f2bd0ebc5315a2e9361a258"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#a8510ee5f4f2bd0ebc5315a2e9361a258">startServer</a> (const std::string &amp;instanceName, <a class="el" href="classinja_1_1Environment.html">inja::Environment</a> &amp;environment, const std::function&lt; void(typename HttpExpressServer::Config &amp;)&gt; &amp;configurator=nullptr)</td></tr>
<tr class="separator:a8510ee5f4f2bd0ebc5315a2e9361a258"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ddf1224851353fc92bfbff6f499fa97" id="r_a0ddf1224851353fc92bfbff6f499fa97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
<tr class="separator:a0ddf1224851353fc92bfbff6f499fa97"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="abcf60cb690f64fa70b8f3728e1de0759" name="abcf60cb690f64fa70b8f3728e1de0759"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abcf60cb690f64fa70b8f3728e1de0759">&#9670;&#160;</a></span>APPLICATION()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void upgrade APPLICATION </td>
          <td>(</td>
          <td class="paramtype">req</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">res</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mqttbroker_8cpp_source.html#l00069">69</a> of file <a class="el" href="mqttbroker_8cpp_source.html">mqttbroker.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   69</span>                                          {</div>
<div class="line"><span class="lineno">   70</span>    <span class="keywordflow">if</span> (req-&gt;get(<span class="stringliteral">&quot;sec-websocket-protocol&quot;</span>).find(<span class="stringliteral">&quot;mqtt&quot;</span>) != std::string::npos) {</div>
<div class="line"><span class="lineno">   71</span>        res-&gt;upgrade(req, [req, res](<span class="keyword">const</span> std::string&amp; name) {</div>
<div class="line"><span class="lineno">   72</span>            <span class="keywordflow">if</span> (!name.empty()) {</div>
<div class="line"><span class="lineno">   73</span>                VLOG(1) &lt;&lt; <span class="stringliteral">&quot;Successful upgrade to &#39;&quot;</span> &lt;&lt; name &lt;&lt; <span class="stringliteral">&quot;&#39;  requested: &quot;</span> &lt;&lt; req-&gt;get(<span class="stringliteral">&quot;upgrade&quot;</span>);</div>
<div class="line"><span class="lineno">   74</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   75</span>                VLOG(1) &lt;&lt; <span class="stringliteral">&quot;Can not upgrade to any of &#39;&quot;</span> &lt;&lt; req-&gt;get(<span class="stringliteral">&quot;upgrade&quot;</span>) &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span>;</div>
<div class="line"><span class="lineno">   76</span>            }</div>
<div class="line"><span class="lineno">   77</span>            res-&gt;end();</div>
<div class="line"><span class="lineno">   78</span>        });</div>
<div class="line"><span class="lineno">   79</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   80</span>        VLOG(1) &lt;&lt; <span class="stringliteral">&quot;Not supporting any of: &quot;</span> &lt;&lt; req-&gt;get(<span class="stringliteral">&quot;sec-websocket-protocol&quot;</span>);</div>
<div class="line"><span class="lineno">   81</span> </div>
<div class="line"><span class="lineno">   82</span>        res-&gt;sendStatus(404);</div>
<div class="line"><span class="lineno">   83</span>    }</div>
<div class="line"><span class="lineno">   84</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a113c358f84d4e5e7012f7726243b9d5e" name="a113c358f84d4e5e7012f7726243b9d5e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a113c358f84d4e5e7012f7726243b9d5e">&#9670;&#160;</a></span>getDetailedPage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::string getDetailedPage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classinja_1_1Environment.html">inja::Environment</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>environment</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classmqtt_1_1mqttbroker_1_1lib_1_1Mqtt.html">mqtt::mqttbroker::lib::Mqtt</a> *</td>          <td class="paramname"><span class="paramname"><em>mqtt</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mqttbroker_8cpp_source.html#l00128">128</a> of file <a class="el" href="mqttbroker_8cpp_source.html">mqttbroker.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  128</span>                                                                                                  {</div>
<div class="line"><span class="lineno">  129</span>    <span class="keywordflow">return</span> environment.<a class="code hl_function" href="classinja_1_1Environment.html#aaefdd9061b23f1764056689fe8c31e30">render_file</a>(<span class="stringliteral">&quot;DetailPage.html&quot;</span>,</div>
<div class="line"><span class="lineno">  130</span>                                   {{<span class="stringliteral">&quot;title&quot;</span>, <a class="code hl_namespace" href="namespacemqtt.html">mqtt</a>-&gt;getClientId()},</div>
<div class="line"><span class="lineno">  131</span>                                    {<span class="stringliteral">&quot;header_row&quot;</span>, {<span class="stringliteral">&quot;Attribute&quot;</span>, <span class="stringliteral">&quot;Value&quot;</span>}},</div>
<div class="line"><span class="lineno">  132</span>                                    {<span class="stringliteral">&quot;data_rows&quot;</span>,</div>
<div class="line"><span class="lineno">  133</span>                                     inja::json::array({{<span class="stringliteral">&quot;Client ID&quot;</span>, <a class="code hl_namespace" href="namespacemqtt.html">mqtt</a>-&gt;getClientId()},</div>
<div class="line"><span class="lineno">  134</span>                                                        {<span class="stringliteral">&quot;Connection&quot;</span>, <a class="code hl_namespace" href="namespacemqtt.html">mqtt</a>-&gt;getConnectionName()},</div>
<div class="line"><span class="lineno">  135</span>                                                        {<span class="stringliteral">&quot;Clean Session&quot;</span>, <a class="code hl_namespace" href="namespacemqtt.html">mqtt</a>-&gt;getCleanSession() ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>},</div>
<div class="line"><span class="lineno">  136</span>                                                        {<span class="stringliteral">&quot;Connect Flags&quot;</span>, std::to_string(<a class="code hl_namespace" href="namespacemqtt.html">mqtt</a>-&gt;getConnectFlags())},</div>
<div class="line"><span class="lineno">  137</span>                                                        {<span class="stringliteral">&quot;Username&quot;</span>, <a class="code hl_namespace" href="namespacemqtt.html">mqtt</a>-&gt;getUsername()},</div>
<div class="line"><span class="lineno">  138</span>                                                        {<span class="stringliteral">&quot;Username Flag&quot;</span>, <a class="code hl_namespace" href="namespacemqtt.html">mqtt</a>-&gt;getUsernameFlag() ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>},</div>
<div class="line"><span class="lineno">  139</span>                                                        {<span class="stringliteral">&quot;Password&quot;</span>, <a class="code hl_namespace" href="namespacemqtt.html">mqtt</a>-&gt;getPassword()},</div>
<div class="line"><span class="lineno">  140</span>                                                        {<span class="stringliteral">&quot;Password Flag&quot;</span>, <a class="code hl_namespace" href="namespacemqtt.html">mqtt</a>-&gt;getPasswordFlag() ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>},</div>
<div class="line"><span class="lineno">  141</span>                                                        {<span class="stringliteral">&quot;Keep Alive&quot;</span>, std::to_string(<a class="code hl_namespace" href="namespacemqtt.html">mqtt</a>-&gt;getKeepAlive())},</div>
<div class="line"><span class="lineno">  142</span>                                                        {<span class="stringliteral">&quot;Protocol&quot;</span>, <a class="code hl_namespace" href="namespacemqtt.html">mqtt</a>-&gt;getProtocol()},</div>
<div class="line"><span class="lineno">  143</span>                                                        {<span class="stringliteral">&quot;Protocol Level&quot;</span>, std::to_string(<a class="code hl_namespace" href="namespacemqtt.html">mqtt</a>-&gt;getLevel())},</div>
<div class="line"><span class="lineno">  144</span>                                                        {<span class="stringliteral">&quot;Loop Prevention&quot;</span>, !<a class="code hl_namespace" href="namespacemqtt.html">mqtt</a>-&gt;getReflect() ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>},</div>
<div class="line"><span class="lineno">  145</span>                                                        {<span class="stringliteral">&quot;Will Message&quot;</span>, <a class="code hl_namespace" href="namespacemqtt.html">mqtt</a>-&gt;getWillMessage()},</div>
<div class="line"><span class="lineno">  146</span>                                                        {<span class="stringliteral">&quot;Will Topic&quot;</span>, <a class="code hl_namespace" href="namespacemqtt.html">mqtt</a>-&gt;getWillTopic()},</div>
<div class="line"><span class="lineno">  147</span>                                                        {<span class="stringliteral">&quot;Will QoS&quot;</span>, std::to_string(<a class="code hl_namespace" href="namespacemqtt.html">mqtt</a>-&gt;getWillQoS())},</div>
<div class="line"><span class="lineno">  148</span>                                                        {<span class="stringliteral">&quot;Will Flag&quot;</span>, <a class="code hl_namespace" href="namespacemqtt.html">mqtt</a>-&gt;getWillFlag() ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>},</div>
<div class="line"><span class="lineno">  149</span>                                                        {<span class="stringliteral">&quot;Will Retain&quot;</span>, <a class="code hl_namespace" href="namespacemqtt.html">mqtt</a>-&gt;getWillRetain() ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>}})}});</div>
<div class="line"><span class="lineno">  150</span>}</div>
<div class="ttc" id="aclassinja_1_1Environment_html_aaefdd9061b23f1764056689fe8c31e30"><div class="ttname"><a href="classinja_1_1Environment.html#aaefdd9061b23f1764056689fe8c31e30">inja::Environment::render_file</a></div><div class="ttdeci">std::string render_file(const std::string &amp;filename, const json &amp;data)</div><div class="ttdef"><b>Definition</b> <a href="inja_8hpp_source.html#l02958">inja.hpp:2958</a></div></div>
<div class="ttc" id="anamespacemqtt_html"><div class="ttname"><a href="namespacemqtt.html">mqtt</a></div><div class="ttdef"><b>Definition</b> <a href="JsonMappingReader_8cpp_source.html#l00033">JsonMappingReader.cpp:33</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8efa425515f60a2e93fb017517771a3e" name="a8efa425515f60a2e93fb017517771a3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8efa425515f60a2e93fb017517771a3e">&#9670;&#160;</a></span>getOverviewPage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::string getOverviewPage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classinja_1_1Environment.html">inja::Environment</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>environment</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classmqtt_1_1mqttbroker_1_1lib_1_1MqttModel.html">mqtt::mqttbroker::lib::MqttModel</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>mqttModel</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mqttbroker_8cpp_source.html#l00096">96</a> of file <a class="el" href="mqttbroker_8cpp_source.html">mqttbroker.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   96</span>                                                                                                      {</div>
<div class="line"><span class="lineno">   97</span>    <a class="code hl_typedef" href="namespaceinja.html#a2a3499b2cd7bb5321ef0aa5cc38768bc">inja::json</a> <a class="code hl_typedef" href="binary-validation_8cpp.html#a0c01dbde6677d7e4769b85716c69c491">json</a>;</div>
<div class="line"><span class="lineno">   98</span> </div>
<div class="line"><span class="lineno">   99</span>    <a class="code hl_typedef" href="binary-validation_8cpp.html#a0c01dbde6677d7e4769b85716c69c491">json</a>[<span class="stringliteral">&quot;title&quot;</span>] = <span class="stringliteral">&quot;MQTTBroker | Active Clients&quot;</span>;</div>
<div class="line"><span class="lineno">  100</span>    <a class="code hl_typedef" href="binary-validation_8cpp.html#a0c01dbde6677d7e4769b85716c69c491">json</a>[<span class="stringliteral">&quot;header_row&quot;</span>] = {<span class="stringliteral">&quot;Client ID&quot;</span>, <span class="stringliteral">&quot;Online Since&quot;</span>, <span class="stringliteral">&quot;Duration&quot;</span>, <span class="stringliteral">&quot;Connection&quot;</span>, <span class="stringliteral">&quot;Local Address&quot;</span>, <span class="stringliteral">&quot;Remote Address&quot;</span>, <span class="stringliteral">&quot;Action&quot;</span>};</div>
<div class="line"><span class="lineno">  101</span>    <a class="code hl_typedef" href="binary-validation_8cpp.html#a0c01dbde6677d7e4769b85716c69c491">json</a>[<span class="stringliteral">&quot;voc&quot;</span>] = <a class="code hl_function" href="#a41a2989a69eb2abb480616f166598a89">href</a>(<span class="stringliteral">&quot;Volker Christian&quot;</span>, <span class="stringliteral">&quot;https://github.com/VolkerChristian/&quot;</span>);</div>
<div class="line"><span class="lineno">  102</span>    <a class="code hl_typedef" href="binary-validation_8cpp.html#a0c01dbde6677d7e4769b85716c69c491">json</a>[<span class="stringliteral">&quot;broker&quot;</span>] = <a class="code hl_function" href="#a41a2989a69eb2abb480616f166598a89">href</a>(<span class="stringliteral">&quot;MQTTBroker&quot;</span>, <span class="stringliteral">&quot;https://github.com/SNodeC/mqttsuite/tree/master/mqttbroker&quot;</span>);</div>
<div class="line"><span class="lineno">  103</span>    <a class="code hl_typedef" href="binary-validation_8cpp.html#a0c01dbde6677d7e4769b85716c69c491">json</a>[<span class="stringliteral">&quot;suite&quot;</span>] = <a class="code hl_function" href="#a41a2989a69eb2abb480616f166598a89">href</a>(<span class="stringliteral">&quot;MQTTSuite&quot;</span>, <span class="stringliteral">&quot;https://github.com/SNodeC/mqttsuite&quot;</span>);</div>
<div class="line"><span class="lineno">  104</span>    <a class="code hl_typedef" href="binary-validation_8cpp.html#a0c01dbde6677d7e4769b85716c69c491">json</a>[<span class="stringliteral">&quot;snodec&quot;</span>] = <span class="stringliteral">&quot;Powered by &quot;</span> + <a class="code hl_function" href="#a41a2989a69eb2abb480616f166598a89">href</a>(<span class="stringliteral">&quot;SNode.C&quot;</span>, <span class="stringliteral">&quot;https://github.com/SNodeC/snode.c&quot;</span>);</div>
<div class="line"><span class="lineno">  105</span>    <a class="code hl_typedef" href="binary-validation_8cpp.html#a0c01dbde6677d7e4769b85716c69c491">json</a>[<span class="stringliteral">&quot;since&quot;</span>] = mqttModel.<a class="code hl_function" href="classmqtt_1_1mqttbroker_1_1lib_1_1MqttModel.html#a91fc1ed46bf75fded412034533ea60ce">onlineSince</a>();</div>
<div class="line"><span class="lineno">  106</span>    <a class="code hl_typedef" href="binary-validation_8cpp.html#a0c01dbde6677d7e4769b85716c69c491">json</a>[<span class="stringliteral">&quot;duration&quot;</span>] = mqttModel.<a class="code hl_function" href="classmqtt_1_1mqttbroker_1_1lib_1_1MqttModel.html#a9423a3d458e7642931e54069583ac30d">onlineDuration</a>();</div>
<div class="line"><span class="lineno">  107</span>    <a class="code hl_typedef" href="binary-validation_8cpp.html#a0c01dbde6677d7e4769b85716c69c491">json</a>[<span class="stringliteral">&quot;data_rows&quot;</span>] = inja::json::array();</div>
<div class="line"><span class="lineno">  108</span> </div>
<div class="line"><span class="lineno">  109</span>    <a class="code hl_typedef" href="namespaceinja.html#a2a3499b2cd7bb5321ef0aa5cc38768bc">inja::json</a>&amp; jsonDataRows = <a class="code hl_typedef" href="binary-validation_8cpp.html#a0c01dbde6677d7e4769b85716c69c491">json</a>[<span class="stringliteral">&quot;data_rows&quot;</span>];</div>
<div class="line"><span class="lineno">  110</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; [connectionName, mqttModelEntry] : mqttModel.getClients()) {</div>
<div class="line"><span class="lineno">  111</span>        <span class="keyword">const</span> <a class="code hl_class" href="classmqtt_1_1mqttbroker_1_1lib_1_1Mqtt.html">mqtt::mqttbroker::lib::Mqtt</a>* <a class="code hl_namespace" href="namespacemqtt.html">mqtt</a> = mqttModelEntry.getMqtt();</div>
<div class="line"><span class="lineno">  112</span>        <span class="keyword">const</span> core::socket::stream::SocketConnection* socketConnection = <a class="code hl_namespace" href="namespacemqtt.html">mqtt</a>-&gt;getMqttContext()-&gt;getSocketConnection();</div>
<div class="line"><span class="lineno">  113</span> </div>
<div class="line"><span class="lineno">  114</span>        <span class="keyword">const</span> std::string windowId = <span class="stringliteral">&quot;window&quot;</span> + std::to_string(<span class="keyword">reinterpret_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span><span class="keyword">&gt;</span>(<a class="code hl_namespace" href="namespacemqtt.html">mqtt</a>));</div>
<div class="line"><span class="lineno">  115</span> </div>
<div class="line"><span class="lineno">  116</span>        jsonDataRows.push_back({<a class="code hl_function" href="#a41a2989a69eb2abb480616f166598a89">href</a>(<a class="code hl_namespace" href="namespacemqtt.html">mqtt</a>-&gt;getClientId(), <span class="stringliteral">&quot;/client?&quot;</span> + <a class="code hl_namespace" href="namespacemqtt.html">mqtt</a>-&gt;getConnectionName(), windowId, 450, 900),</div>
<div class="line"><span class="lineno">  117</span>                                mqttModelEntry.onlineSince(),</div>
<div class="line"><span class="lineno">  118</span>                                <span class="stringliteral">&quot;&lt;duration&gt;&quot;</span> + mqttModelEntry.onlineDuration() + <span class="stringliteral">&quot;&lt;/duration&gt;&quot;</span>,</div>
<div class="line"><span class="lineno">  119</span>                                <a class="code hl_namespace" href="namespacemqtt.html">mqtt</a>-&gt;getConnectionName(),</div>
<div class="line"><span class="lineno">  120</span>                                socketConnection-&gt;getLocalAddress().toString(),</div>
<div class="line"><span class="lineno">  121</span>                                socketConnection-&gt;getRemoteAddress().toString(),</div>
<div class="line"><span class="lineno">  122</span>                                <span class="stringliteral">&quot;&lt;button onClick=\&quot;disconnectClient(&#39;&quot;</span> + <a class="code hl_namespace" href="namespacemqtt.html">mqtt</a>-&gt;getConnectionName() + <span class="stringliteral">&quot;&#39;)\&quot;&gt;Disconnect&lt;/button&gt;&quot;</span>});</div>
<div class="line"><span class="lineno">  123</span>    }</div>
<div class="line"><span class="lineno">  124</span> </div>
<div class="line"><span class="lineno">  125</span>    <span class="keywordflow">return</span> environment.<a class="code hl_function" href="classinja_1_1Environment.html#aaefdd9061b23f1764056689fe8c31e30">render_file</a>(<span class="stringliteral">&quot;OverviewPage.html&quot;</span>, <a class="code hl_typedef" href="binary-validation_8cpp.html#a0c01dbde6677d7e4769b85716c69c491">json</a>);</div>
<div class="line"><span class="lineno">  126</span>}</div>
<div class="ttc" id="abinary-validation_8cpp_html_a0c01dbde6677d7e4769b85716c69c491"><div class="ttname"><a href="binary-validation_8cpp.html#a0c01dbde6677d7e4769b85716c69c491">json</a></div><div class="ttdeci">nlohmann::json json</div><div class="ttdef"><b>Definition</b> <a href="binary-validation_8cpp_source.html#l00030">binary-validation.cpp:30</a></div></div>
<div class="ttc" id="aclassmqtt_1_1mqttbroker_1_1lib_1_1MqttModel_html_a91fc1ed46bf75fded412034533ea60ce"><div class="ttname"><a href="classmqtt_1_1mqttbroker_1_1lib_1_1MqttModel.html#a91fc1ed46bf75fded412034533ea60ce">mqtt::mqttbroker::lib::MqttModel::onlineSince</a></div><div class="ttdeci">std::string onlineSince()</div><div class="ttdef"><b>Definition</b> <a href="MqttModel_8cpp_source.html#l00066">MqttModel.cpp:66</a></div></div>
<div class="ttc" id="aclassmqtt_1_1mqttbroker_1_1lib_1_1MqttModel_html_a9423a3d458e7642931e54069583ac30d"><div class="ttname"><a href="classmqtt_1_1mqttbroker_1_1lib_1_1MqttModel.html#a9423a3d458e7642931e54069583ac30d">mqtt::mqttbroker::lib::MqttModel::onlineDuration</a></div><div class="ttdeci">std::string onlineDuration()</div><div class="ttdef"><b>Definition</b> <a href="MqttModel_8cpp_source.html#l00070">MqttModel.cpp:70</a></div></div>
<div class="ttc" id="aclassmqtt_1_1mqttbroker_1_1lib_1_1Mqtt_html"><div class="ttname"><a href="classmqtt_1_1mqttbroker_1_1lib_1_1Mqtt.html">mqtt::mqttbroker::lib::Mqtt</a></div><div class="ttdef"><b>Definition</b> <a href="mqttbroker_2lib_2Mqtt_8h_source.html#l00041">Mqtt.h:43</a></div></div>
<div class="ttc" id="amqttbroker_8cpp_html_a41a2989a69eb2abb480616f166598a89"><div class="ttname"><a href="#a41a2989a69eb2abb480616f166598a89">href</a></div><div class="ttdeci">static std::string href(const std::string &amp;text, const std::string &amp;link)</div><div class="ttdef"><b>Definition</b> <a href="mqttbroker_8cpp_source.html#l00086">mqttbroker.cpp:86</a></div></div>
<div class="ttc" id="anamespaceinja_html_a2a3499b2cd7bb5321ef0aa5cc38768bc"><div class="ttname"><a href="namespaceinja.html#a2a3499b2cd7bb5321ef0aa5cc38768bc">inja::json</a></div><div class="ttdeci">nlohmann::json json</div><div class="ttdef"><b>Definition</b> <a href="MqttMapperPlugin_8h_source.html#l00035">MqttMapperPlugin.h:35</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a50ddcb3430ae14c608a8cb6c86033669" name="a50ddcb3430ae14c608a8cb6c86033669"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50ddcb3430ae14c608a8cb6c86033669">&#9670;&#160;</a></span>getRouter()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static express::Router getRouter </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classinja_1_1Environment.html">inja::Environment</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>environment</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mqttbroker_8cpp_source.html#l00185">185</a> of file <a class="el" href="mqttbroker_8cpp_source.html">mqttbroker.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  185</span>                                                             {</div>
<div class="line"><span class="lineno">  186</span>    <span class="keyword">const</span> express::Router router;</div>
<div class="line"><span class="lineno">  187</span> </div>
<div class="line"><span class="lineno">  188</span>    <span class="keyword">const</span> express::Router&amp; jsonRouter = express::middleware::JsonMiddleware();</div>
<div class="line"><span class="lineno">  189</span> </div>
<div class="line"><span class="lineno">  190</span>    jsonRouter.post([] <a class="code hl_function" href="#abcf60cb690f64fa70b8f3728e1de0759">APPLICATION</a>(req, res) {</div>
<div class="line"><span class="lineno">  191</span>        req-&gt;getAttribute&lt;nlohmann::json&gt;(</div>
<div class="line"><span class="lineno">  192</span>            [&amp;res](nlohmann::json&amp; <a class="code hl_typedef" href="binary-validation_8cpp.html#a0c01dbde6677d7e4769b85716c69c491">json</a>) {</div>
<div class="line"><span class="lineno">  193</span>                std::string jsonString = <a class="code hl_typedef" href="binary-validation_8cpp.html#a0c01dbde6677d7e4769b85716c69c491">json</a>.dump(4);</div>
<div class="line"><span class="lineno">  194</span>                VLOG(1) &lt;&lt; <span class="stringliteral">&quot;Application received JSON body\n&quot;</span> &lt;&lt; jsonString;</div>
<div class="line"><span class="lineno">  195</span> </div>
<div class="line"><span class="lineno">  196</span>                std::string connectionName = <a class="code hl_typedef" href="binary-validation_8cpp.html#a0c01dbde6677d7e4769b85716c69c491">json</a>[<span class="stringliteral">&quot;connection_name&quot;</span>].get&lt;std::string&gt;();</div>
<div class="line"><span class="lineno">  197</span>                <span class="keyword">const</span> <a class="code hl_class" href="classmqtt_1_1mqttbroker_1_1lib_1_1Mqtt.html">mqtt::mqttbroker::lib::Mqtt</a>* <a class="code hl_namespace" href="namespacemqtt.html">mqtt</a> = <a class="code hl_function" href="classmqtt_1_1mqttbroker_1_1lib_1_1MqttModel.html#a472d48d30d9626c722b64ddce4002e5f">mqtt::mqttbroker::lib::MqttModel::instance</a>().<a class="code hl_function" href="classmqtt_1_1mqttbroker_1_1lib_1_1MqttModel.html#a0020697b741c839cbf75dfca93bf2626">getMqtt</a>(connectionName);</div>
<div class="line"><span class="lineno">  198</span> </div>
<div class="line"><span class="lineno">  199</span>                <span class="keywordflow">if</span> (<a class="code hl_namespace" href="namespacemqtt.html">mqtt</a> != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno">  200</span>                    <a class="code hl_namespace" href="namespacemqtt.html">mqtt</a>-&gt;getMqttContext()-&gt;getSocketConnection()-&gt;close();</div>
<div class="line"><span class="lineno">  201</span>                    res-&gt;send(jsonString);</div>
<div class="line"><span class="lineno">  202</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  203</span>                    res-&gt;status(404).send(<span class="stringliteral">&quot;MQTT client has already gone away: &quot;</span> + <a class="code hl_typedef" href="binary-validation_8cpp.html#a0c01dbde6677d7e4769b85716c69c491">json</a>[<span class="stringliteral">&quot;connection_name&quot;</span>].get&lt;std::string&gt;());</div>
<div class="line"><span class="lineno">  204</span>                }</div>
<div class="line"><span class="lineno">  205</span>            },</div>
<div class="line"><span class="lineno">  206</span>            [&amp;res](<span class="keyword">const</span> std::string&amp; key) {</div>
<div class="line"><span class="lineno">  207</span>                VLOG(1) &lt;&lt; <span class="stringliteral">&quot;Attribute type not found: &quot;</span> &lt;&lt; key;</div>
<div class="line"><span class="lineno">  208</span> </div>
<div class="line"><span class="lineno">  209</span>                res-&gt;status(400).send(<span class="stringliteral">&quot;Attribute type not found: &quot;</span> + key);</div>
<div class="line"><span class="lineno">  210</span>            });</div>
<div class="line"><span class="lineno">  211</span>    });</div>
<div class="line"><span class="lineno">  212</span> </div>
<div class="line"><span class="lineno">  213</span>    router.use(<span class="stringliteral">&quot;/clients&quot;</span>, jsonRouter);</div>
<div class="line"><span class="lineno">  214</span> </div>
<div class="line"><span class="lineno">  215</span>    router.get(<span class="stringliteral">&quot;/clients&quot;</span>, [&amp;environment] <a class="code hl_function" href="#abcf60cb690f64fa70b8f3728e1de0759">APPLICATION</a>(req, res) {</div>
<div class="line"><span class="lineno">  216</span>        std::string responseString;</div>
<div class="line"><span class="lineno">  217</span>        <span class="keywordtype">int</span> responseStatus = 200;</div>
<div class="line"><span class="lineno">  218</span> </div>
<div class="line"><span class="lineno">  219</span>        <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  220</span>            responseString = <a class="code hl_function" href="#a8efa425515f60a2e93fb017517771a3e">getOverviewPage</a>(environment, <a class="code hl_function" href="classmqtt_1_1mqttbroker_1_1lib_1_1MqttModel.html#a472d48d30d9626c722b64ddce4002e5f">mqtt::mqttbroker::lib::MqttModel::instance</a>());</div>
<div class="line"><span class="lineno">  221</span>        } <span class="keywordflow">catch</span> (...) {</div>
<div class="line"><span class="lineno">  222</span>            responseStatus = 500;</div>
<div class="line"><span class="lineno">  223</span>            responseString = <span class="stringliteral">&quot;Internal Server Error&quot;</span>;</div>
<div class="line"><span class="lineno">  224</span>        }</div>
<div class="line"><span class="lineno">  225</span> </div>
<div class="line"><span class="lineno">  226</span>        res-&gt;status(responseStatus).send(responseString);</div>
<div class="line"><span class="lineno">  227</span>    });</div>
<div class="line"><span class="lineno">  228</span> </div>
<div class="line"><span class="lineno">  229</span>    router.get(<span class="stringliteral">&quot;/client&quot;</span>, [&amp;environment] <a class="code hl_function" href="#abcf60cb690f64fa70b8f3728e1de0759">APPLICATION</a>(req, res) {</div>
<div class="line"><span class="lineno">  230</span>        std::string responseString;</div>
<div class="line"><span class="lineno">  231</span>        <span class="keywordtype">int</span> responseStatus = 200;</div>
<div class="line"><span class="lineno">  232</span> </div>
<div class="line"><span class="lineno">  233</span>        <span class="keywordflow">if</span> (req-&gt;queries.size() == 1) {</div>
<div class="line"><span class="lineno">  234</span>            <span class="keyword">const</span> <a class="code hl_class" href="classmqtt_1_1mqttbroker_1_1lib_1_1Mqtt.html">mqtt::mqttbroker::lib::Mqtt</a>* <a class="code hl_namespace" href="namespacemqtt.html">mqtt</a> =</div>
<div class="line"><span class="lineno">  235</span>                <a class="code hl_function" href="classmqtt_1_1mqttbroker_1_1lib_1_1MqttModel.html#a472d48d30d9626c722b64ddce4002e5f">mqtt::mqttbroker::lib::MqttModel::instance</a>().<a class="code hl_function" href="classmqtt_1_1mqttbroker_1_1lib_1_1MqttModel.html#a0020697b741c839cbf75dfca93bf2626">getMqtt</a>(<a class="code hl_function" href="#a060eea8fb783d5b54f6fa11cf4e32be9">urlDecode</a>(req-&gt;queries.begin()-&gt;first));</div>
<div class="line"><span class="lineno">  236</span> </div>
<div class="line"><span class="lineno">  237</span>            <span class="keywordflow">if</span> (<a class="code hl_namespace" href="namespacemqtt.html">mqtt</a> != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno">  238</span>                <span class="keywordflow">try</span> {</div>
<div class="line"><span class="lineno">  239</span>                    responseString = <a class="code hl_function" href="#a113c358f84d4e5e7012f7726243b9d5e">getDetailedPage</a>(environment, <a class="code hl_namespace" href="namespacemqtt.html">mqtt</a>);</div>
<div class="line"><span class="lineno">  240</span>                } <span class="keywordflow">catch</span> (...) {</div>
<div class="line"><span class="lineno">  241</span>                    responseStatus = 500;</div>
<div class="line"><span class="lineno">  242</span>                    responseString = <span class="stringliteral">&quot;Internal Server Error&quot;</span>;</div>
<div class="line"><span class="lineno">  243</span>                }</div>
<div class="line"><span class="lineno">  244</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  245</span>                responseStatus = 404;</div>
<div class="line"><span class="lineno">  246</span>                responseString = <span class="stringliteral">&quot;Not Found: &quot;</span> + <a class="code hl_function" href="#a060eea8fb783d5b54f6fa11cf4e32be9">urlDecode</a>(req-&gt;queries.begin()-&gt;first);</div>
<div class="line"><span class="lineno">  247</span>            }</div>
<div class="line"><span class="lineno">  248</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  249</span>            responseStatus = 400;</div>
<div class="line"><span class="lineno">  250</span>            responseString = <span class="stringliteral">&quot;Bad Request: No Client requested&quot;</span>;</div>
<div class="line"><span class="lineno">  251</span>        }</div>
<div class="line"><span class="lineno">  252</span> </div>
<div class="line"><span class="lineno">  253</span>        res-&gt;status(responseStatus).send(responseString);</div>
<div class="line"><span class="lineno">  254</span>    });</div>
<div class="line"><span class="lineno">  255</span> </div>
<div class="line"><span class="lineno">  256</span>    router.get(<span class="stringliteral">&quot;/ws&quot;</span>, [] <a class="code hl_function" href="#abcf60cb690f64fa70b8f3728e1de0759">APPLICATION</a>(req, res) {</div>
<div class="line"><span class="lineno">  257</span>        <span class="keywordflow">if</span> (req-&gt;headers.contains(<span class="stringliteral">&quot;upgrade&quot;</span>)) {</div>
<div class="line"><span class="lineno">  258</span>            upgrade(req, res);</div>
<div class="line"><span class="lineno">  259</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  260</span>            res-&gt;redirect(<span class="stringliteral">&quot;/clients&quot;</span>);</div>
<div class="line"><span class="lineno">  261</span>        }</div>
<div class="line"><span class="lineno">  262</span>    });</div>
<div class="line"><span class="lineno">  263</span> </div>
<div class="line"><span class="lineno">  264</span>    router.get(<span class="stringliteral">&quot;/&quot;</span>, [] <a class="code hl_function" href="#abcf60cb690f64fa70b8f3728e1de0759">APPLICATION</a>(req, res) {</div>
<div class="line"><span class="lineno">  265</span>        <span class="keywordflow">if</span> (req-&gt;headers.contains(<span class="stringliteral">&quot;upgrade&quot;</span>)) {</div>
<div class="line"><span class="lineno">  266</span>            upgrade(req, res);</div>
<div class="line"><span class="lineno">  267</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  268</span>            res-&gt;redirect(<span class="stringliteral">&quot;/clients&quot;</span>);</div>
<div class="line"><span class="lineno">  269</span>        }</div>
<div class="line"><span class="lineno">  270</span>    });</div>
<div class="line"><span class="lineno">  271</span> </div>
<div class="line"><span class="lineno">  272</span>    <span class="keywordflow">return</span> router;</div>
<div class="line"><span class="lineno">  273</span>}</div>
<div class="ttc" id="aclassmqtt_1_1mqttbroker_1_1lib_1_1MqttModel_html_a0020697b741c839cbf75dfca93bf2626"><div class="ttname"><a href="classmqtt_1_1mqttbroker_1_1lib_1_1MqttModel.html#a0020697b741c839cbf75dfca93bf2626">mqtt::mqttbroker::lib::MqttModel::getMqtt</a></div><div class="ttdeci">const Mqtt * getMqtt(const std::string &amp;connectionId)</div><div class="ttdef"><b>Definition</b> <a href="MqttModel_8cpp_source.html#l00056">MqttModel.cpp:56</a></div></div>
<div class="ttc" id="aclassmqtt_1_1mqttbroker_1_1lib_1_1MqttModel_html_a472d48d30d9626c722b64ddce4002e5f"><div class="ttname"><a href="classmqtt_1_1mqttbroker_1_1lib_1_1MqttModel.html#a472d48d30d9626c722b64ddce4002e5f">mqtt::mqttbroker::lib::MqttModel::instance</a></div><div class="ttdeci">static MqttModel &amp; instance()</div><div class="ttdef"><b>Definition</b> <a href="MqttModel_8cpp_source.html#l00038">MqttModel.cpp:38</a></div></div>
<div class="ttc" id="amqttbroker_8cpp_html_a060eea8fb783d5b54f6fa11cf4e32be9"><div class="ttname"><a href="#a060eea8fb783d5b54f6fa11cf4e32be9">urlDecode</a></div><div class="ttdeci">static std::string urlDecode(const std::string &amp;encoded)</div><div class="ttdef"><b>Definition</b> <a href="mqttbroker_8cpp_source.html#l00152">mqttbroker.cpp:152</a></div></div>
<div class="ttc" id="amqttbroker_8cpp_html_a113c358f84d4e5e7012f7726243b9d5e"><div class="ttname"><a href="#a113c358f84d4e5e7012f7726243b9d5e">getDetailedPage</a></div><div class="ttdeci">static std::string getDetailedPage(inja::Environment &amp;environment, const mqtt::mqttbroker::lib::Mqtt *mqtt)</div><div class="ttdef"><b>Definition</b> <a href="mqttbroker_8cpp_source.html#l00128">mqttbroker.cpp:128</a></div></div>
<div class="ttc" id="amqttbroker_8cpp_html_a8efa425515f60a2e93fb017517771a3e"><div class="ttname"><a href="#a8efa425515f60a2e93fb017517771a3e">getOverviewPage</a></div><div class="ttdeci">static std::string getOverviewPage(inja::Environment &amp;environment, mqtt::mqttbroker::lib::MqttModel &amp;mqttModel)</div><div class="ttdef"><b>Definition</b> <a href="mqttbroker_8cpp_source.html#l00096">mqttbroker.cpp:96</a></div></div>
<div class="ttc" id="amqttbroker_8cpp_html_abcf60cb690f64fa70b8f3728e1de0759"><div class="ttname"><a href="#abcf60cb690f64fa70b8f3728e1de0759">APPLICATION</a></div><div class="ttdeci">static void upgrade APPLICATION(req, res)</div><div class="ttdef"><b>Definition</b> <a href="mqttbroker_8cpp_source.html#l00069">mqttbroker.cpp:69</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a41a2989a69eb2abb480616f166598a89" name="a41a2989a69eb2abb480616f166598a89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41a2989a69eb2abb480616f166598a89">&#9670;&#160;</a></span>href() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::string href </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>text</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>link</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mqttbroker_8cpp_source.html#l00086">86</a> of file <a class="el" href="mqttbroker_8cpp_source.html">mqttbroker.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   86</span>                                                                    {</div>
<div class="line"><span class="lineno">   87</span>    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&lt;a href=\&quot;&quot;</span> + link + <span class="stringliteral">&quot;\&quot; style=\&quot;color:inherit;\&quot;&gt;&quot;</span> + text + <span class="stringliteral">&quot;&lt;/a&gt;&quot;</span>;</div>
<div class="line"><span class="lineno">   88</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a9dfd7c4353c3e607ddb8f6b0d920db36" name="a9dfd7c4353c3e607ddb8f6b0d920db36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9dfd7c4353c3e607ddb8f6b0d920db36">&#9670;&#160;</a></span>href() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::string href </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>text</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>url</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>windowId</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>width</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>height</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mqttbroker_8cpp_source.html#l00090">90</a> of file <a class="el" href="mqttbroker_8cpp_source.html">mqttbroker.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   90</span>                                                                                                                               {</div>
<div class="line"><span class="lineno">   91</span>    <span class="keywordflow">return</span> <span class="stringliteral">&quot;&lt;a href=\&quot;#\&quot; onClick=\&quot;&quot;</span> + windowId + <span class="stringliteral">&quot;=window.open(&#39;&quot;</span> + url + <span class="stringliteral">&quot;&#39;, &#39;&quot;</span> + windowId + <span class="stringliteral">&quot;&#39;, &#39;width=&quot;</span> + std::to_string(width) +</div>
<div class="line"><span class="lineno">   92</span>           <span class="stringliteral">&quot;, height=&quot;</span> + std::to_string(height) +</div>
<div class="line"><span class="lineno">   93</span>           <span class="stringliteral">&quot;,location=no, menubar=no, status=no, toolbar=no&#39;); return false;\&quot; style=\&quot;color:inherit;\&quot;&gt;&quot;</span> + text + <span class="stringliteral">&quot;&lt;/a&gt;&quot;</span>;</div>
<div class="line"><span class="lineno">   94</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a0ddf1224851353fc92bfbff6f499fa97" name="a0ddf1224851353fc92bfbff6f499fa97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ddf1224851353fc92bfbff6f499fa97">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>argc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>argv</em></span>[]&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mqttbroker_8cpp_source.html#l00343">343</a> of file <a class="el" href="mqttbroker_8cpp_source.html">mqttbroker.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  343</span>                                 {</div>
<div class="line"><span class="lineno">  344</span>    utils::Config::addStringOption(<span class="stringliteral">&quot;--mqtt-mapping-file&quot;</span>, <span class="stringliteral">&quot;MQTT mapping file (json format) for integration&quot;</span>, <span class="stringliteral">&quot;[path]&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno">  345</span>    utils::Config::addStringOption(<span class="stringliteral">&quot;--mqtt-session-store&quot;</span>, <span class="stringliteral">&quot;Path to file for the persistent session store&quot;</span>, <span class="stringliteral">&quot;[path]&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno">  346</span>    utils::Config::addStringOption(<span class="stringliteral">&quot;--html-dir&quot;</span>, <span class="stringliteral">&quot;Path to html source directory&quot;</span>, <span class="stringliteral">&quot;[path]&quot;</span>, <span class="stringliteral">&quot;/var/www/mqttsuite/mqttbroker&quot;</span>);</div>
<div class="line"><span class="lineno">  347</span> </div>
<div class="line"><span class="lineno">  348</span>    core::SNodeC::init(argc, argv);</div>
<div class="line"><span class="lineno">  349</span> </div>
<div class="line"><span class="lineno">  350</span>    setenv(<span class="stringliteral">&quot;MQTT_SESSION_STORE&quot;</span>, utils::Config::getStringOptionValue(<span class="stringliteral">&quot;--mqtt-session-store&quot;</span>).data(), 0);</div>
<div class="line"><span class="lineno">  351</span> </div>
<div class="line"><span class="lineno">  352</span>    <a class="code hl_function" href="#a56089521f567aa4fa0b6788a1edb489e">startServer&lt;net::in::stream::legacy::SocketServer, mqtt::mqttbroker::SharedSocketContextFactory&gt;</a>(<span class="stringliteral">&quot;in-mqtt&quot;</span>, [](<span class="keyword">auto</span>&amp; config) {</div>
<div class="line"><span class="lineno">  353</span>        config.setPort(1883);</div>
<div class="line"><span class="lineno">  354</span>        config.setRetry();</div>
<div class="line"><span class="lineno">  355</span>    });</div>
<div class="line"><span class="lineno">  356</span> </div>
<div class="line"><span class="lineno">  357</span>    <a class="code hl_function" href="#a56089521f567aa4fa0b6788a1edb489e">startServer&lt;net::in::stream::tls::SocketServer, mqtt::mqttbroker::SharedSocketContextFactory&gt;</a>(<span class="stringliteral">&quot;in-mqtts&quot;</span>, [](<span class="keyword">auto</span>&amp; config) {</div>
<div class="line"><span class="lineno">  358</span>        config.setPort(8883);</div>
<div class="line"><span class="lineno">  359</span>        config.setRetry();</div>
<div class="line"><span class="lineno">  360</span>    });</div>
<div class="line"><span class="lineno">  361</span> </div>
<div class="line"><span class="lineno">  362</span>    <a class="code hl_function" href="#a56089521f567aa4fa0b6788a1edb489e">startServer&lt;net::in6::stream::legacy::SocketServer, mqtt::mqttbroker::SharedSocketContextFactory&gt;</a>(<span class="stringliteral">&quot;in6-mqtt&quot;</span>, [](<span class="keyword">auto</span>&amp; config) {</div>
<div class="line"><span class="lineno">  363</span>        config.setPort(1883);</div>
<div class="line"><span class="lineno">  364</span>        config.setRetry();</div>
<div class="line"><span class="lineno">  365</span> </div>
<div class="line"><span class="lineno">  366</span>        config.setIPv6Only();</div>
<div class="line"><span class="lineno">  367</span>    });</div>
<div class="line"><span class="lineno">  368</span> </div>
<div class="line"><span class="lineno">  369</span>    <a class="code hl_function" href="#a56089521f567aa4fa0b6788a1edb489e">startServer&lt;net::in6::stream::tls::SocketServer, mqtt::mqttbroker::SharedSocketContextFactory&gt;</a>(<span class="stringliteral">&quot;in6-mqtts&quot;</span>, [](<span class="keyword">auto</span>&amp; config) {</div>
<div class="line"><span class="lineno">  370</span>        config.setPort(8883);</div>
<div class="line"><span class="lineno">  371</span>        config.setRetry();</div>
<div class="line"><span class="lineno">  372</span> </div>
<div class="line"><span class="lineno">  373</span>        config.setIPv6Only();</div>
<div class="line"><span class="lineno">  374</span>    });</div>
<div class="line"><span class="lineno">  375</span> </div>
<div class="line"><span class="lineno">  376</span>    <a class="code hl_function" href="#a56089521f567aa4fa0b6788a1edb489e">startServer&lt;net::un::stream::legacy::SocketServer, mqtt::mqttbroker::SharedSocketContextFactory&gt;</a>(<span class="stringliteral">&quot;un-mqtt&quot;</span>, [](<span class="keyword">auto</span>&amp; config) {</div>
<div class="line"><span class="lineno">  377</span>        config.setSunPath(<span class="stringliteral">&quot;/tmp/&quot;</span> + utils::Config::getApplicationName() + <span class="stringliteral">&quot;-&quot;</span> + config.getInstanceName());</div>
<div class="line"><span class="lineno">  378</span>        config.setRetry();</div>
<div class="line"><span class="lineno">  379</span>    });</div>
<div class="line"><span class="lineno">  380</span> </div>
<div class="line"><span class="lineno">  381</span>    <a class="code hl_function" href="#a56089521f567aa4fa0b6788a1edb489e">startServer&lt;net::un::stream::tls::SocketServer, mqtt::mqttbroker::SharedSocketContextFactory&gt;</a>(<span class="stringliteral">&quot;un-mqtts&quot;</span>, [](<span class="keyword">auto</span>&amp; config) {</div>
<div class="line"><span class="lineno">  382</span>        config.setSunPath(<span class="stringliteral">&quot;/tmp/&quot;</span> + utils::Config::getApplicationName() + <span class="stringliteral">&quot;-&quot;</span> + config.getInstanceName());</div>
<div class="line"><span class="lineno">  383</span>        config.setRetry();</div>
<div class="line"><span class="lineno">  384</span>    });</div>
<div class="line"><span class="lineno">  385</span> </div>
<div class="line"><span class="lineno">  386</span>    <a class="code hl_class" href="classinja_1_1Environment.html">inja::Environment</a> environment{utils::Config::getStringOptionValue(<span class="stringliteral">&quot;--html-dir&quot;</span>) + <span class="stringliteral">&quot;/&quot;</span>};</div>
<div class="line"><span class="lineno">  387</span> </div>
<div class="line"><span class="lineno">  388</span>    <a class="code hl_function" href="#a56089521f567aa4fa0b6788a1edb489e">startServer&lt;express::legacy::in::WebApp&gt;</a>(<span class="stringliteral">&quot;in-http&quot;</span>, environment, [](<span class="keyword">auto</span>&amp; config) {</div>
<div class="line"><span class="lineno">  389</span>        config.setPort(8080);</div>
<div class="line"><span class="lineno">  390</span>        config.setRetry();</div>
<div class="line"><span class="lineno">  391</span>    });</div>
<div class="line"><span class="lineno">  392</span> </div>
<div class="line"><span class="lineno">  393</span>    <a class="code hl_function" href="#a56089521f567aa4fa0b6788a1edb489e">startServer&lt;express::tls::in::WebApp&gt;</a>(<span class="stringliteral">&quot;in-https&quot;</span>, environment, [](<span class="keyword">auto</span>&amp; config) {</div>
<div class="line"><span class="lineno">  394</span>        config.setPort(8088);</div>
<div class="line"><span class="lineno">  395</span>        config.setRetry();</div>
<div class="line"><span class="lineno">  396</span>    });</div>
<div class="line"><span class="lineno">  397</span> </div>
<div class="line"><span class="lineno">  398</span>    <a class="code hl_function" href="#a56089521f567aa4fa0b6788a1edb489e">startServer&lt;express::legacy::in6::WebApp&gt;</a>(<span class="stringliteral">&quot;in6-http&quot;</span>, environment, [](<span class="keyword">auto</span>&amp; config) {</div>
<div class="line"><span class="lineno">  399</span>        config.setPort(8080);</div>
<div class="line"><span class="lineno">  400</span>        config.setRetry();</div>
<div class="line"><span class="lineno">  401</span> </div>
<div class="line"><span class="lineno">  402</span>        config.setIPv6Only();</div>
<div class="line"><span class="lineno">  403</span>    });</div>
<div class="line"><span class="lineno">  404</span> </div>
<div class="line"><span class="lineno">  405</span>    <a class="code hl_function" href="#a56089521f567aa4fa0b6788a1edb489e">startServer&lt;express::tls::in6::WebApp&gt;</a>(<span class="stringliteral">&quot;in6-https&quot;</span>, environment, [](<span class="keyword">auto</span>&amp; config) {</div>
<div class="line"><span class="lineno">  406</span>        config.setPort(8088);</div>
<div class="line"><span class="lineno">  407</span>        config.setRetry();</div>
<div class="line"><span class="lineno">  408</span> </div>
<div class="line"><span class="lineno">  409</span>        config.setIPv6Only();</div>
<div class="line"><span class="lineno">  410</span>    });</div>
<div class="line"><span class="lineno">  411</span> </div>
<div class="line"><span class="lineno">  412</span>    <span class="keywordflow">return</span> core::SNodeC::start();</div>
<div class="line"><span class="lineno">  413</span>}</div>
<div class="ttc" id="aclassinja_1_1Environment_html"><div class="ttname"><a href="classinja_1_1Environment.html">inja::Environment</a></div><div class="ttdoc">Class for changing the configuration.</div><div class="ttdef"><b>Definition</b> <a href="inja_8hpp_source.html#l02851">inja.hpp:2851</a></div></div>
<div class="ttc" id="amqttbroker_8cpp_html_a56089521f567aa4fa0b6788a1edb489e"><div class="ttname"><a href="#a56089521f567aa4fa0b6788a1edb489e">startServer</a></div><div class="ttdeci">void startServer(const std::string &amp;instanceName, const std::function&lt; void(typename Server::Config &amp;)&gt; &amp;configurator, SocketContextFactoryArgs &amp;&amp;... socketContextFactoryArgs)</div><div class="ttdef"><b>Definition</b> <a href="mqttbroker_8cpp_source.html#l00299">mqttbroker.cpp:299</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7cb8447e3290d506bf8a79ddeca2c7d0" name="a7cb8447e3290d506bf8a79ddeca2c7d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cb8447e3290d506bf8a79ddeca2c7d0">&#9670;&#160;</a></span>reportState()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void reportState </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>instanceName</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const core::socket::SocketAddress &amp;</td>          <td class="paramname"><span class="paramname"><em>socketAddress</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const core::socket::State &amp;</td>          <td class="paramname"><span class="paramname"><em>state</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mqttbroker_8cpp_source.html#l00276">276</a> of file <a class="el" href="mqttbroker_8cpp_source.html">mqttbroker.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  276</span>                                                                                                                       {</div>
<div class="line"><span class="lineno">  277</span>    <span class="keywordflow">switch</span> (state) {</div>
<div class="line"><span class="lineno">  278</span>        <span class="keywordflow">case</span> core::socket::State::OK:</div>
<div class="line"><span class="lineno">  279</span>            VLOG(1) &lt;&lt; instanceName &lt;&lt; <span class="stringliteral">&quot;: listening on &#39;&quot;</span> &lt;&lt; socketAddress.toString() &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span>;</div>
<div class="line"><span class="lineno">  280</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  281</span>        <span class="keywordflow">case</span> core::socket::State::DISABLED:</div>
<div class="line"><span class="lineno">  282</span>            VLOG(1) &lt;&lt; instanceName &lt;&lt; <span class="stringliteral">&quot;: disabled&quot;</span>;</div>
<div class="line"><span class="lineno">  283</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  284</span>        <span class="keywordflow">case</span> core::socket::State::ERROR:</div>
<div class="line"><span class="lineno">  285</span>            VLOG(1) &lt;&lt; instanceName &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; socketAddress.toString() &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; state.what();</div>
<div class="line"><span class="lineno">  286</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  287</span>        <span class="keywordflow">case</span> core::socket::State::FATAL:</div>
<div class="line"><span class="lineno">  288</span>            VLOG(1) &lt;&lt; instanceName &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; socketAddress.toString() &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; state.what();</div>
<div class="line"><span class="lineno">  289</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  290</span>    }</div>
<div class="line"><span class="lineno">  291</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a56089521f567aa4fa0b6788a1edb489e" name="a56089521f567aa4fa0b6788a1edb489e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56089521f567aa4fa0b6788a1edb489e">&#9670;&#160;</a></span>startServer() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;template&lt; typename, typename... &gt; typename SocketServer, typename SocketContextFactory , typename... SocketContextFactoryArgs, typename Server  = SocketServer&lt;SocketContextFactory, SocketContextFactoryArgs&amp;&amp;...&gt;, typename SocketAddress  = typename Server::SocketAddress, typename  = std::enable_if_t&lt;std::is_base_of_v&lt;core::socket::stream::SocketContextFactory, SocketContextFactory&gt;&gt;&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void startServer </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>instanceName</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::function&lt; void(typename Server::Config &amp;)&gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>configurator</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SocketContextFactoryArgs &amp;&amp;...</td>          <td class="paramname"><span class="paramname"><em>socketContextFactoryArgs</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mqttbroker_8cpp_source.html#l00299">299</a> of file <a class="el" href="mqttbroker_8cpp_source.html">mqttbroker.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  301</span>                                                                         {</div>
<div class="line"><span class="lineno">  302</span>    <span class="keyword">const</span> Server server(instanceName, std::forward&lt;SocketContextFactoryArgs&gt;(socketContextFactoryArgs)...);</div>
<div class="line"><span class="lineno">  303</span> </div>
<div class="line"><span class="lineno">  304</span>    configurator(server.getConfig());</div>
<div class="line"><span class="lineno">  305</span> </div>
<div class="line"><span class="lineno">  306</span>    server.listen([instanceName](<span class="keyword">const</span> SocketAddress&amp; socketAddress, <span class="keyword">const</span> core::socket::State&amp; state) {</div>
<div class="line"><span class="lineno">  307</span>        <a class="code hl_function" href="#a7cb8447e3290d506bf8a79ddeca2c7d0">reportState</a>(instanceName, socketAddress, state);</div>
<div class="line"><span class="lineno">  308</span>    });</div>
<div class="line"><span class="lineno">  309</span>}</div>
<div class="ttc" id="amqttbroker_8cpp_html_a7cb8447e3290d506bf8a79ddeca2c7d0"><div class="ttname"><a href="#a7cb8447e3290d506bf8a79ddeca2c7d0">reportState</a></div><div class="ttdeci">static void reportState(const std::string &amp;instanceName, const core::socket::SocketAddress &amp;socketAddress, const core::socket::State &amp;state)</div><div class="ttdef"><b>Definition</b> <a href="mqttbroker_8cpp_source.html#l00276">mqttbroker.cpp:276</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8510ee5f4f2bd0ebc5315a2e9361a258" name="a8510ee5f4f2bd0ebc5315a2e9361a258"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8510ee5f4f2bd0ebc5315a2e9361a258">&#9670;&#160;</a></span>startServer() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename HttpExpressServer &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void startServer </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>instanceName</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classinja_1_1Environment.html">inja::Environment</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>environment</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::function&lt; void(typename HttpExpressServer::Config &amp;)&gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>configurator</em></span><span class="paramdefsep"> = </span><span class="paramdefval">nullptr</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mqttbroker_8cpp_source.html#l00328">328</a> of file <a class="el" href="mqttbroker_8cpp_source.html">mqttbroker.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  330</span>                                                                                                     {</div>
<div class="line"><span class="lineno">  331</span>    <span class="keyword">using </span>SocketAddress = <span class="keyword">typename</span> HttpExpressServer::SocketAddress;</div>
<div class="line"><span class="lineno">  332</span> </div>
<div class="line"><span class="lineno">  333</span>    <span class="keyword">const</span> HttpExpressServer httpExpressServer(instanceName, <a class="code hl_function" href="#a50ddcb3430ae14c608a8cb6c86033669">getRouter</a>(environment));</div>
<div class="line"><span class="lineno">  334</span> </div>
<div class="line"><span class="lineno">  335</span>    <span class="keywordflow">if</span> (configurator != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno">  336</span>        configurator(httpExpressServer.getConfig());</div>
<div class="line"><span class="lineno">  337</span>    }</div>
<div class="line"><span class="lineno">  338</span>    httpExpressServer.listen([instanceName](<span class="keyword">const</span> SocketAddress&amp; socketAddress, <span class="keyword">const</span> core::socket::State&amp; state) {</div>
<div class="line"><span class="lineno">  339</span>        <a class="code hl_function" href="#a7cb8447e3290d506bf8a79ddeca2c7d0">reportState</a>(instanceName, socketAddress, state);</div>
<div class="line"><span class="lineno">  340</span>    });</div>
<div class="line"><span class="lineno">  341</span>}</div>
<div class="ttc" id="amqttbroker_8cpp_html_a50ddcb3430ae14c608a8cb6c86033669"><div class="ttname"><a href="#a50ddcb3430ae14c608a8cb6c86033669">getRouter</a></div><div class="ttdeci">static express::Router getRouter(inja::Environment &amp;environment)</div><div class="ttdef"><b>Definition</b> <a href="mqttbroker_8cpp_source.html#l00185">mqttbroker.cpp:185</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ade35717ef12be889cc09968dce2a3103" name="ade35717ef12be889cc09968dce2a3103"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade35717ef12be889cc09968dce2a3103">&#9670;&#160;</a></span>startServer() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;template&lt; typename, typename... &gt; typename SocketServer, typename SocketContextFactory , typename... SocketContextFactoryArgs, typename Server  = SocketServer&lt;SocketContextFactory, SocketContextFactoryArgs&amp;&amp;...&gt;, typename SocketAddress  = typename Server::SocketAddress, typename  = std::enable_if_t&lt;not std::is_invocable_v&lt;std::tuple_element_t&lt;0, std::tuple&lt;SocketContextFactoryArgs...&gt;&gt;,                                                              typename SocketServer&lt;SocketContextFactory&gt;::Config&amp;&gt;&gt;&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void startServer </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>instanceName</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SocketContextFactoryArgs &amp;&amp;...</td>          <td class="paramname"><span class="paramname"><em>socketContextFactoryArgs</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mqttbroker_8cpp_source.html#l00320">320</a> of file <a class="el" href="mqttbroker_8cpp_source.html">mqttbroker.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  320</span>                                                                                                        {</div>
<div class="line"><span class="lineno">  321</span>    Server(instanceName, std::forward&lt;SocketContextFactoryArgs&gt;(socketContextFactoryArgs)...)</div>
<div class="line"><span class="lineno">  322</span>        .listen([instanceName](<span class="keyword">const</span> SocketAddress&amp; socketAddress, <span class="keyword">const</span> core::socket::State&amp; state) {</div>
<div class="line"><span class="lineno">  323</span>            <a class="code hl_function" href="#a7cb8447e3290d506bf8a79ddeca2c7d0">reportState</a>(instanceName, socketAddress, state);</div>
<div class="line"><span class="lineno">  324</span>        });</div>
<div class="line"><span class="lineno">  325</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a060eea8fb783d5b54f6fa11cf4e32be9" name="a060eea8fb783d5b54f6fa11cf4e32be9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a060eea8fb783d5b54f6fa11cf4e32be9">&#9670;&#160;</a></span>urlDecode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::string urlDecode </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;</td>          <td class="paramname"><span class="paramname"><em>encoded</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="mqttbroker_8cpp_source.html#l00152">152</a> of file <a class="el" href="mqttbroker_8cpp_source.html">mqttbroker.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  152</span>                                                     {</div>
<div class="line"><span class="lineno">  153</span>    std::string decoded;</div>
<div class="line"><span class="lineno">  154</span>    <span class="keywordtype">size_t</span> i = 0;</div>
<div class="line"><span class="lineno">  155</span> </div>
<div class="line"><span class="lineno">  156</span>    <span class="keywordflow">while</span> (i &lt; encoded.length()) {</div>
<div class="line"><span class="lineno">  157</span>        <span class="keywordtype">char</span> ch = encoded[i];</div>
<div class="line"><span class="lineno">  158</span>        <span class="keywordflow">if</span> (ch == <span class="charliteral">&#39;%&#39;</span>) {</div>
<div class="line"><span class="lineno">  159</span>            <span class="comment">// Make sure there are at least two characters after &#39;%&#39;</span></div>
<div class="line"><span class="lineno">  160</span>            <span class="keywordflow">if</span> (i + 2 &lt; encoded.length() &amp;&amp; std::isxdigit(encoded[i + 1]) &amp;&amp; std::isxdigit(encoded[i + 2])) {</div>
<div class="line"><span class="lineno">  161</span>                <span class="comment">// Convert the two hex digits to a character</span></div>
<div class="line"><span class="lineno">  162</span>                std::string hexValue = encoded.substr(i + 1, 2);</div>
<div class="line"><span class="lineno">  163</span>                <span class="keywordtype">char</span> decodedChar = <span class="keyword">static_cast&lt;</span><span class="keywordtype">char</span><span class="keyword">&gt;</span>(std::stoi(hexValue, <span class="keyword">nullptr</span>, 16));</div>
<div class="line"><span class="lineno">  164</span>                decoded.push_back(decodedChar);</div>
<div class="line"><span class="lineno">  165</span>                i += 3; <span class="comment">// Skip over the % and the two hex digits</span></div>
<div class="line"><span class="lineno">  166</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  167</span>                <span class="comment">// Malformed encoding, just add the &#39;%&#39; as is.</span></div>
<div class="line"><span class="lineno">  168</span>                decoded.push_back(ch);</div>
<div class="line"><span class="lineno">  169</span>                ++i;</div>
<div class="line"><span class="lineno">  170</span>            }</div>
<div class="line"><span class="lineno">  171</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ch == <span class="charliteral">&#39;+&#39;</span>) {</div>
<div class="line"><span class="lineno">  172</span>            <span class="comment">// Convert &#39;+&#39; to space (common in URL encoding)</span></div>
<div class="line"><span class="lineno">  173</span>            decoded.push_back(<span class="charliteral">&#39; &#39;</span>);</div>
<div class="line"><span class="lineno">  174</span>            ++i;</div>
<div class="line"><span class="lineno">  175</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  176</span>            <span class="comment">// Regular character, just append it.</span></div>
<div class="line"><span class="lineno">  177</span>            decoded.push_back(ch);</div>
<div class="line"><span class="lineno">  178</span>            ++i;</div>
<div class="line"><span class="lineno">  179</span>        }</div>
<div class="line"><span class="lineno">  180</span>    }</div>
<div class="line"><span class="lineno">  181</span> </div>
<div class="line"><span class="lineno">  182</span>    <span class="keywordflow">return</span> decoded;</div>
<div class="line"><span class="lineno">  183</span>}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_6923aae39fdce29699351e77c1fed0e3.html">mqttbroker</a></li><li class="navelem"><a class="el" href="mqttbroker_8cpp.html">mqttbroker.cpp</a></li>
    <li class="footer">Generated on Tue Feb 25 2025 13:53:25 for MQTTSuite by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0 </li>
  </ul>
</div>
</body>
</html>
